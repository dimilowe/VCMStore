**You added the correct PG variablesâ€¦ but ONLY in the â€œApp Secretsâ€ tab.
Replit Deploy does NOT use these.**
Replit has two different environments:
âœ… 1. App Secrets
Used for:
Running the app in the Replit workspace
Local Preview
Console
NOT used for deployments
This is what youâ€™re looking at in your screenshot.
â— 2. Deployment Environment (Production Secrets)
Used only when you press Publish / Deploy
Completely separate store of variables
MUST contain:
DATABASE_URL
PGHOST
PGPORT
PGUSER
PGPASSWORD
PGDATABASE
Right now, your deployment environment is empty, which is why the build cannot connect to the database even though everything is configured correctly.
This explains:
Dev works
SQL migrations worked
Agent says column exists
Build still fails
And the error says â€œMissing or incomplete PostgreSQL connection secretsâ€
This is 100% consistent with Deployment Secrets being empty.
ğŸ”¥ How to fix it (do this and the build will succeed)
Step 1 â€” Open Deploy Settings
In Replit:
Top bar â†’ Publishing tab
Look for "Deployment Settings" or "Environment Variables" under the deployment configuration
You will see a second environment variable editor separate from App Secrets
Step 2 â€” Add the same PG vars (copy them manually)
Add these EXACT values:
Name	Value
DATABASE_URL	postgresql://neondb_owner:npg_k0UGOl5Mnrpz@ep-green-field-a41na2i0-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
PGHOST	ep-green-field-a41na2i0-pooler.us-east-1.aws.neon.tech
PGPORT	5432
PGUSER	neondb_owner
PGPASSWORD	npg_k0UGOl5Mnrpz
PGDATABASE	neondb
Step 3 â€” Save / Apply
There will usually be:
A â€œSave changesâ€
Or â€œUpdate environmentâ€
Or â€œApply to deploymentâ€
Step 4 â€” Republish
Now the deployment build will:
Load the correct Neon credentials
Connect to the DB
See pillar_slug
Build successfully
ğŸ§  Why this happened
Replit introduced a new deployment system:
Running your app uses App Secrets
Deploying your app uses Deployment Secrets
They do NOT sync automatically
This is why your dev environment worked but production didnâ€™t
This is exactly the failure mode you see:
â€œcolumn pillar_slug does not existâ€
because the build is querying a blank internal DB, not your Neon DB.
â­ Once you put the PG vars into the deployment environment, the error will disappear instantly.
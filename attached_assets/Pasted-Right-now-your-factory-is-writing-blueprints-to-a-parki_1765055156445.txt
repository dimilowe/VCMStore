Right now your “factory” is writing blueprints to a parking lot file. You want it writing straight onto the factory floor.
What should happen
New flow (correct):
You click Run Expansion.
expandBlueprint():
computes all combos
checks for existing slugs
for each new combo, INSERTS into tools table with:
status = 'draft'
is_indexed = false
in_directory = false
link_status = 'Not Ready' (or whatever string)
engine, cluster, slug, name, etc.
You go to Tool Control Panel → filter Status: Draft and see all new shells immediately.
Link Builder runs (either inline or as a follow-up step) and sets link_status = 'Ready'.
You run Interlink Audit on the affected cluster(s), then toggle:
status = 'published'
is_indexed = true
in_directory = true (if you want it in the public directory)
No JSON import step, no friction.
Things they need to get right when they change it
Tell Replit to make sure of this:
Slug is unique at DB level
Add a unique index on slug in the tools table if it doesn’t already exist.
Expansion code should:
check for existing slug
skip instead of throwing if found
That keeps idempotency bulletproof.
Wrap inserts in a transaction
If they’re inserting 25–100 tools, wrap it so:
either all rows for that blueprint get committed
or none do (on error), no half-inserted sets.
Still log output
They can optionally keep generatedShells.json purely as a log/backup:
blueprint id
timestamp
list of created/ skipped slugs
But DB is the source of truth.
Set all defaults correctly
Every row created from expansion must be:
status = 'draft'
is_indexed = false
in_directory = false
featured = false
link_status = 'Not Ready' (until Link Builder has run)
any “segment/label” fields set based on blueprint
Return a useful summary
After writing to DB, expandBlueprint() should still return something like:
{
  "created": 24,
  "skipped": 8,
  "createdSlugs": [...],
  "skippedSlugs": [...]
}
so the UI can show:
“24 shells created, 8 skipped (already existed).”
Once that’s in place, your Engine Expansion Factory is truly plug-and-play: click → DB gets shells → Tool Control Panel shows them → you just review and toggle live.
So yes: updating expandBlueprint() to write straight into the tools table is exactly what you should do.
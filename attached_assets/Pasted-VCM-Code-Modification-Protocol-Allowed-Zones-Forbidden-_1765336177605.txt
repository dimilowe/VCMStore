VCM Code Modification Protocol
(Allowed Zones & Forbidden Zones Model)
This document defines exactly what an AI agent or contributor is allowed to modify inside the VCM Suite codebase. These rules exist to protect architecture, prevent regressions, and enforce consistency across engines, clouds, tools, and CMS-driven pages.
üö´ FORBIDDEN ZONES (DO NOT MODIFY)
The following files and directories are structurally critical and must never be modified unless the Founder explicitly approves the change.
1. Global Styling & Design System
app/globals.css
Any global @layer base or @layer utilities definitions
Global CSS tokens, color maps, theme variables
Reason: These define the entire design system. Any change cascades across thousands of pages.
2. Core Database & Server Infrastructure
lib/db.ts
Prisma schema files (unless explicit approval is given)
Any shared DB connection logic
Reason: These are sensitive, shared across clouds & tools. Breaking them breaks everything.
3. Core Engine Registry
lib/engineRegistry.ts
data/toolsRegistry.ts
Allowed: Append-only new engine registrations or new tool entries.
Forbidden: Refactoring, removing entries, renaming engine keys, or altering existing registry structure.
Reason: This registry is the backbone of the Engine ‚Üí Config ‚Üí Renderer system.
4. Layouts & Top-Level Routing
app/layout.tsx
Cloud layouts (app/(clouds)/**/layout.tsx)
Marketing layouts
Reason: Breaking a layout collapses the entire rendering stack.
5. Authentication, Entitlements & OS Interfaces
lib/cloudEntitlements.ts
app/api/user/entitlements/**
Any internal OS mirror interfaces
Allowed: Adding new endpoints.
Forbidden: Modifying entitlement logic or existing OS calls.
‚ö†Ô∏è THEME CONSTRAINT (GLOBAL RULE)
LIGHT-THEME ONLY ‚Äî DO NOT USE DARK MODE
The codebase is currently light-theme only.
‚ùå Forbidden:
Do not use Tailwind dark: variants anywhere in:
Engines
Tools
Layouts
Marketing wrappers
Shared components
Reason: No dark palette has been designed yet. Any dark: class silently overrides text colors and causes washed-out UI.
Only add dark: classes if the Founder explicitly requests dark-mode implementation.
‚úÖ ALLOWED ZONES (SAFE TO MODIFY)
You may freely edit these areas as long as you follow the existing architecture patterns.
1. Engine Configurations
engines/**/config.ts
Add new presets, modify labels, adjust CTA content.
Rule: Do not change the shape of an existing config schema.
2. Engine Components
components/engines/**/*.tsx
Allowed:
Update UI inside the engine
Add UI elements
Add controlled client-side logic
Add feature-gated UI based on entitlements
Forbidden:
Importing server code (must use .client.ts variants)
Adding inline CSS except for debugging or temporary patches
3. CMS Tool Definitions
Create new CMS tool entries
Update SEO metadata
Update config references
Add cloud tags
Rule: Do not change existing slugs.
4. API Routes (New Ones Only)
You may create new API endpoints under app/api/** following existing patterns.
Forbidden:
Modifying existing API endpoints unless explicitly instructed.
5. Client-Side Utilities
lib/cloudEntitlements.client.ts
lib/parseQuery.ts
Other client-only helpers
Rule: These must remain client-safe. No DB imports.
üß™ DEBUGGING STANDARD (REQUIRED)
When diagnosing UI issues, the contributor must:
Inspect the element in DevTools
Open Computed panel
Check:
color
opacity
filter
-webkit-text-fill-color
Paste the Computed output + screenshot into the chat before proposing a fix
Reason: Prevents blind CSS edits and ensures exact diagnosis.
üîê SAFETY RULES FOR AGENTS
Agents MUST:
Follow the Engine ‚Üí Config ‚Üí Renderer architecture
Use Tailwind classes (no inline styles unless explicitly asked)
Keep logic decoupled (client/server separation)
Ask before modifying anything in Forbidden Zones
Agents MUST NOT:
Introduce dark mode classes
Add new global CSS
Change layouts
Edit registries except append-only
Modify entitlements or DB layers
Introduce inline styling as permanent fixes
üéØ SUMMARY PROMISE
These guardrails ensure:
Engines stay modular
Cloud entitlements stay stable
The design system stays consistent
Debugging becomes trivial
No ‚Äúrogue changes‚Äù appear in critical infrastructure
Development stays fast, safe, and scalable
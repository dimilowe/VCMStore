✅ THE FULL REPLIT PROMPT — “Build the Global URL Registry System”
BEGIN PROMPT
I want you to build a universal indexing control system for VCM Suite called Global URL Registry.
This system must allow me to toggle ANY live URL on or off for indexing — not just Renderer-powered pages.
Build this system into my Next.js App Router project (TypeScript), using my Neon Postgres database.
-------------------------
1. DATABASE SCHEMA
-------------------------
Create a new table: global_urls
Columns:
id (uuid, primary key)
url (text, unique, required)
title (text, optional)
type (text enum: “renderer”, “static”, “legacy”, “product”, “idea”, “tool”, “custom”)
isIndexed (boolean, default false)
canonical (text, optional)
notes (text, optional)
createdAt (timestamp, default now)
updatedAt (timestamp, auto-update)
This table will act as the master list of ALL URLs on the domain.
-------------------------
2. AUTO-DISCOVERY API
-------------------------
Create an API route:
app/api/global-urls/discover/route.ts
This API must:
Scan the entire app/ folder for:
static routes
dynamic routes
Renderer driven routes
legacy pages
tool pages
idea pages
product pages
For each found URL:
Insert into global_urls if not existing
Do NOT modify existing isIndexed
Fill in type based on directory structure
Return the full list of discovered URLs.
This gives me an automated crawler to populate the registry.
-------------------------
3. ADMIN UI
-------------------------
Create a new admin page:
app/admin/indexing/page.tsx
This UI must:
Display a searchable, filterable table of all rows in global_urls
Columns: URL, Title, Type, isIndexed Toggle, Last Modified, Notes
Allow inline editing of:
title
type selector
notes
canonical
isIndexed (toggle)
Add filters:
Only Indexed
Only Not Indexed
Only Renderer Pages
Only Legacy Pages
Orphan Pages (no internal inbound links)
Add bulk actions:
Bulk toggle “Index On”
Bulk toggle “Index Off”
Bulk delete
This admin must write back to the database.
Make it clean, use your existing UI style (cards, tables, toggles).
-------------------------
4. UNIVERSAL ROBOTS META HANDLING
-------------------------
Modify the root layout or create a reusable helper applyIndexing().
Every page — Renderer or not — must run this check:
Look up its url in global_urls
If found:
If isIndexed === false:
Add <meta name="robots" content="noindex,nofollow">
If indexed, do nothing (normal)
If NOT found:
Auto-insert into global_urls with isIndexed = false
Apply noindex,nofollow
Mark type as unknown
This ensures no page goes live without registry awareness.
-------------------------
5. SITEMAP GENERATION
-------------------------
Modify:
app/sitemap.ts
to:
Pull all URLs from global_urls WHERE isIndexed = true
Output a sitemap entry for each
Exclude everything else
Include canonical if available
This gives accurate indexing control across the entire domain.
-------------------------
6. MIDDLEWARE FOR SAFETY
-------------------------
Create:
middleware.ts
Add a safety check:
For any request, check whether the URL exists in global_urls
If not, create a new row with isIndexed = false
Do NOT block rendering
This keeps registry permanently in sync with your routes
-------------------------
7. REMOVE /ai-chat SAFELY
-------------------------
Implement a removal flow:
Delete the page under app/ai-chat
Delete or mark its row in global_urls as:
isIndexed = false
type = legacy
notes = "Deprecated page removed"
Sitemap must drop it automatically.
-------------------------
8. EXPECTED RESULT
-------------------------
When complete, I must be able to:
Toggle indexing ON/OFF for ANY URL on the domain
See ALL URLs in one admin panel
Control sitemap inclusion at the page level
Automatically register new URLs when created
Prevent accidental indexing of prototype pages
Maintain perfect crawl hygiene at scale
Stop rogue pages from hurting SEO
Manage 1,000+ pages safely as VCM Suite grows
This becomes the domain-wide indexing control system for VCM Suite.
END PROMPT